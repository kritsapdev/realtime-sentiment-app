# ขั้นที่ 1: เลือก OS พื้นฐาน เราใช้ Python 3.12 แบบ slim ที่มีขนาดเล็ก
FROM python:3.12-slim

# ขั้นที่ 2: ตั้งค่าโฟลเดอร์ทำงานหลักข้างใน "กล่อง" ของเรา
WORKDIR /app

# ขั้นที่ 3: คัดลอก "ใบสั่งของ" เข้าไปก่อน
# การแยกขั้นตอนนี้ออกมาจะช่วยให้การสร้างครั้งต่อไปเร็วขึ้นมาก ถ้าไฟล์นี้ไม่เปลี่ยน
COPY requirements.txt .

# ขั้นที่ 4: ติดตั้ง Library ทั้งหมดตามใบสั่งของ
RUN pip install --no-cache-dir -r requirements.txt

# ขั้นที่ 5: คัดลอกโค้ดโปรเจกต์ทั้งหมดของเราเข้าไปในกล่อง
COPY . .

# ขั้นที่ 6: บอกให้โลกรู้ว่า "กล่อง" ใบนี้เปิดให้บริการที่ Port 8000
EXPOSE 8000

# ขั้นที่ 7: คำสั่งสุดท้ายที่จะรันเมื่อกล่องนี้ถูกเปิดใช้งาน
# เราสั่งให้มันรัน Backend Server ของเรานั่นเอง
CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]